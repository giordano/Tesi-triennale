\chapter{Programma per la soluzione dell'equazione di Keplero}
\label{cha:soluzione-keplero}

Di seguito è riportato il codice sorgente del programma usato per risolvere
l'equazione di Keplero con i metodi numeric di Newton~-~Raphson e dei
coefficienti di Bessel, illustrati nel
paragrafo~\ref{sec:soluzione-keplero}. Per calcolare i coefficienti di Bessel ho
utilizzato la GNU Scientific Library (GSL).\footnote{La GSL è software libero e
  il codice sorgente può essere scaricato e consultato da Internet all'indirizzo
  \url{http://www.gnu.org/software/gsl/}.} Anche la libreria per il C che ho
usato, Embedded GLIBC (EGLIBC),\footnote{La EGLIBC è software libero il codice
  sorgente può essere scaricato e consultato da Internet all'indirizzo
  \url{http://www.eglibc.org/}.} definisce una funzione per calcolare i
coefficienti di Bessel, ma la GSL è più efficiente. Il programma è suddiviso in
tre file: \verb|keplero.c| che contiene il \verb|main|, l'header
\verb|libreria.h| e la libreria \verb|libreria.c|. Per compilare il programma in
ambiente GNU/Linux ho usato i seguenti comandi da terminale
\begin{verbatim}
$ gcc -c -Wall -pedantic -lm -lgsl -lgslcblas libreria.c
$ gcc -Wall -pedantic -lm -lgsl -lgslcblas -o keplero \
  keplero.c libreria.o
\end{verbatim}
L'esecuzione del programma genera due file di testo, \verb|bessel.dat| e
\verb|newton.dat|, contenenti i risultati delle simulazioni effettuate con i due
diversi metodi.
% TODO: ho commentato l'inserimento del codice per accelerare i tempi di
% compilazione del documento, ricordarsi di decommentare nella versione finale!
% \lstinputlisting[language=C,numbers=left,numberstyle=\tiny,
% caption={File \texttt{keplero.c}}]{programmi/keplero.c}
% \lstinputlisting[language=C,numbers=left,numberstyle=\tiny,
% caption={File \texttt{libreria.h}}]{{programmi/libreria.h}}
% \lstinputlisting[language=C,numbers=left,numberstyle=\tiny,
% caption={File \texttt{libreria.c}}]{{programmi/libreria.c}}

Qui riportiamo inoltre il codice dello script \verb|gnuplot| utilizzato per
ottenere le figure del paragrafo~\ref{sec:soluzione-keplero} a partire dai file
di output generati dall'esecuzione del programma. Per generare i grafici ho
utilizzato il seguente comando da terminale
\begin{verbatim}
gnuplot programmi/keplero.gnuplot
\end{verbatim}
che ho eseguito nella cartella superiore rispetto a quella in cui si trova lo
script \verb|keplero.gnuplot|.
\lstinputlisting[language=gnuplot,
numbers=left,numberstyle=\tiny]{programmi/keplero.gnuplot}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../tesi"
%%% End:
